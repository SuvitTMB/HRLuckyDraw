<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>อั่งเปา โชค 2 ชั้น จาก ทีทีบี 2026 (Copy)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Font (Sarabun) -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --ttb-blue: #002d63;
            --ttb-orange: #f04e23;
            --angpao-red: #d32f2f;
            --angpao-light: #ef5350;
            --brand-blue: #0056ff;
            --status-orange: #f68b1f;
        }

        body { 
            font-family: 'Sarabun', sans-serif; 
            touch-action: manipulation;
            overscroll-behavior-y: none;
            -webkit-tap-highlight-color: transparent;
            color: #1e293b;
            background-color: var(--angpao-red);
            background-image: radial-gradient(var(--angpao-light) 15%, transparent 16%), radial-gradient(var(--angpao-light) 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        
        .app-container {
            width: 100%;
            max-width: 480px; 
            height: 100dvh;
            position: relative;
            background-color: transparent;
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .slide-up { animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .pop-in { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .shake-hard { animation: shakeHard 0.5s infinite; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes popIn { from { transform: scale(0.85); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        @keyframes shakeHard {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-2px, 0px) rotate(1deg); }
            30% { transform: translate(2px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 1px) rotate(1deg); }
            60% { transform: translate(-2px, 1px) rotate(0deg); }
            70% { transform: translate(2px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 1px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .glass {
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .btn-brand-blue {
            background-color: var(--brand-blue);
            box-shadow: 0 4px 14px rgba(0, 86, 255, 0.3);
        }

        .card-luck {
            @apply bg-white rounded-[28px] p-6 border border-slate-100 transition-all duration-300 relative overflow-hidden;
            box-shadow: 0 8px 20px -5px rgba(0, 0, 0, 0.04);
        }
        
        .card-luck-played {
            @apply border-orange-200 shadow-none;
            background-color: white;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .bg-angpao-pattern {
            background-color: var(--angpao-red);
            background-image: radial-gradient(var(--angpao-light) 15%, transparent 16%), radial-gradient(var(--angpao-light) 15%, transparent 16%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }
        .pt-12 { padding-top: 1.5rem !important; }
        .h-48 { height: 8rem !important; }
        .pb-20 { padding-bottom: 1.4rem !important; }
        .card-luck { padding: 10px; border-radius: 15px; background-color: #e4e4e4; }
        .card-luck-played { background-color: #f7dfdf !important;}
    </style>
</head>
<body class="select-none">

    <div class="app-container">

        <!-- VIEW 1: WELCOME SCREEN -->
        <div id="view-welcome" class="absolute inset-0 flex flex-col items-center z-10 transition-all duration-500">
            <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none">
                <div class="absolute top-[-5%] left-[-5%] w-[50%] h-[25%] bg-yellow-400 rounded-full opacity-20 blur-[80px]"></div>
                <div class="absolute bottom-[-5%] right-[-5%] w-[50%] h-[25%] bg-orange-500 rounded-full opacity-20 blur-[80px]"></div>
            </div>

            <div class="relative z-10 flex-1 flex flex-col items-center justify-center text-center px-8 w-full">

                <div style="margin-top:15px;" class="shake-hard">
                    <center><img src="./images/y2026.png" style="width:70%; height: auto;"></center>
                </div>               
                <h1 class="text-2xl font-extrabold text-white mb-2 tracking-tight drop-shadow-md animate-pulse" style="margin-top:15px;">อั่งเปา ลุ้นโชค 2 ชั้น</h1>
                <p class="text-lm text-red-100 font-medium mb-10 opacity-90 drop-shadow-sm">จาก ทีทีบี (ttb)</p>
                
                <div class="glass rounded-[32px] p-4 w-full max-w-xs mx-auto mb-4">
                    <p class="text-white text-base leading-relaxed font-light">
                        เฉลิมฉลองปีใหม่จีน<br>
                        <span class="font-bold text-lg text-yellow-300">ลุ้นรับโชค 2 ชั้น กับ ทีทีบี</span><br>
                        สุดพิเศษเฉพาะคุณเท่านั้น
                    </p>
                </div>
            </div>

            <div class="relative z-10 w-full px-8 pb-12 space-y-4">
                <button onclick="app.goToCeoMessage()" class="w-full  text-white text-lg font-bold py-4 rounded-[24px] transform transition active:scale-95 flex items-center justify-center gap-2" style="background-color: #f68b1f;">
                    <i data-lucide="message-square" class="w-5 h-5"></i>
                    <div>สาส์นจาก CEO</div>
                </button>

                <button onclick="app.goToRegister()" class="w-full text-white text-lg font-bold py-4 rounded-[24px] transform transition active:scale-95 flex items-center justify-center gap-2" style="background-color: #f68b1f;">
                    <span>ลงทะเบียนรับโชค</span>
                    <i data-lucide="arrow-right" class="w-5 h-5"></i>
                </button>
                
                <p class="text-center text-white/70 text-xs mt-4 font-light tracking-[0.1em]">ธนาคารทหารไทยธนชาต จำกัด (มหาชน)</p>
            </div>
        </div>

        <!-- VIEW: CEO MESSAGE -->
        <div id="view-ceo" class="hidden absolute inset-0 flex flex-col z-20 bg-white fade-in">
            <div class="bg-angpao-pattern h-48 relative shrink-0 flex items-end justify-center pb-12">
                <button onclick="app.backFromCeo()" class="absolute top-10 left-6 p-3 text-white bg-black/15 rounded-2xl backdrop-blur-md active:scale-90 transition">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <div class="absolute -bottom-12">
                    <div class="w-28 h-28 bg-white rounded-full p-1 shadow-2xl border-[4px] border-white overflow-hidden">
                        <img src="./images/CEO.png" alt="CEO" class="w-full object-cover" onerror="this.src='https://ui-avatars.com/api/?name=CEO&background=002d63&color=fff'">
                    </div>
                </div>
            </div>
            <div class="flex-1 overflow-y-auto pt-16 px-8 pb-8 text-center no-scrollbar">
                <h2 class="text-xl font-black text-slate-800 mb-1">ปิติ ตัณฑเกษม</h2>
                <p class="text-xs text-ttb-orange tracking-widest mb-6">Chief Executive Officer<br>ธนาคารทหารไทยธนชาต จำกัด (มหาชน)</p>
                <div class="bg-slate-50 p-7 rounded-[32px] border border-slate-100 text-left space-y-5">
                    <p class="text-slate-600 leading-relaxed text-lm font-medium">สวัสดีครับ เพื่อนพนักงานสัญญาจ้างภายนอก</p>
                    <p class="text-slate-500 leading-relaxed text-ls indent-8">ตลอดปีที่ผ่านมา การเดินทางของทีทีบีไม่อาจเกิดขึ้นได้อย่างสมบูรณ์ หากขาดแรงสนับสนุนจากพนักงานสัญญาจ้างภายนอกทุกคน ที่ร่วมกันทำงานอย่างตั้งใจ รับผิดชอบ และทุ่มเทในบทบาทของตนเองอย่างเต็มความสามารถ</p>
                    <p class="text-slate-500 leading-relaxed text-ls indent-8">เพื่อแสดงความชื่นชมและขอบคุณที่ทุกคนมีส่วนช่วยขับเคลื่อนทีทีบีตลอดปีที่ผ่านมา ธนาคารจึงได้จัดกิจกรรมพิเศษ “<b>อั่งเปาโชคสองชั้น</b>” ขึ้น เพื่อมอบความสุขเล็ก ๆ ผ่านโอกาสในการลุ้นโชค รับของรางวัลในเทศกาลตรุษจีนปีนี้ ที่มีทั้งเงินสดและทองคำ</p>
                    <p class="text-slate-500 leading-relaxed text-ls indent-8">ผมหวังเป็นอย่างยิ่งว่า กิจกรรมนี้จะช่วยเติมรอยยิ้มและเป็นกำลังใจให้ทุกคนมีพลัง และขอเป็นตัวแทนทีทีบีขอบคุณทุกคนอีกครั้งสำหรับความร่วมมือและเป็นส่วนหนึ่งที่ช่วยให้ทีทีบีสร้างการเปลี่ยนแปลงที่มีความหมาย ขออวยพรให้ทุกคนประสบความสำเร็จในสิ่งที่ตั้งใจ มีสุขภาพทางกาย ใจ และการเงินที่ดีนะครับ</p>
                    <p class="text-slate-500 leading-relaxed text-ls indent-8">ขอบคุณครับ</p>
                </div>
            </div>
            <div class="p-8">
                <button onclick="app.backFromCeo()" class="w-full bg-slate-200 text-slate-500 text-lg font-bold py-4 rounded-[24px] active:scale-95 transition">กลับหน้าหลัก</button>
            </div>
        </div>

        <!-- VIEW 2: REGISTER -->
        <div id="view-register" class="hidden absolute inset-0 flex flex-col z-20 fade-in">
            <div class="px-8 pt-12 pb-6 flex items-center relative z-10">
                <button onclick="app.goBack()" class="p-3 text-white bg-white/10 rounded-2xl backdrop-blur-md active:scale-90 transition">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <h2 class="text-xl font-black text-white ml-4 drop-shadow-sm">ระบุตัวตน</h2>
            </div>
            <div class="flex-1 bg-white rounded-t-[48px] px-8 pt-12 shadow-2xl flex flex-col w-full slide-up overflow-y-auto no-scrollbar">
                <div class="mb-10 text-center">
                    <div class="w-16 h-1.5 bg-slate-100 rounded-full mx-auto mb-8"></div>
                    <h3 class="text-xl font-black text-slate-800">ยืนยันสิทธิ์พนักงาน</h3>
                    <p class="text-sm text-slate-400 mt-2 font-medium">ตรวจสอบข้อมูลสมาชิก</p>
                </div>
                
                <div class="space-y-6">
                    <div class="relative group">
                        <label class="block text-xs text-slate-400 tracking-widest mb-2 ml-2">กรุณาระบุเลขบัตรประชาชน</label>
                        <input type="tel" id="citizen-id" maxlength="17" placeholder="0-0000-00000-00-0" 
                            class="w-full bg-slate-100 border-2 border-slate-100 rounded-[24px] px-6 py-4 text-xm tracking-[0.12em] text-center text-slate-800 outline-none focus:border-blue-500 focus:bg-white transition-all font-black placeholder:text-slate-200 placeholder:tracking-normal" 
                            oninput="app.validateInput(this)">
                        <div id="validation-icon" class="absolute right-6 bottom-5 text-slate-200 transition-colors">
                            <i data-lucide="shield" class="w-7 h-7"></i>
                        </div>
                    </div>

                    <div class="bg-blue-50 border border-blue-100 rounded-[24px] p-5 flex items-start gap-4">
                        <i data-lucide="info" class="w-5 h-5 text-blue-500 shrink-0 mt-1"></i>
                        <p class="text-xs text-blue-700 leading-relaxed font-semibold">
                            กรุณาระบุเลขบัตรประชาชน 13 หลักของตนเองเพื่อรับสิทธิ์อั่งเปา <font color="#ff0000">ห้ามนำรหัสบัตรประชาชนของท่านอื่นมากรอกโดยเด็ดขาด</font>
                        </p>
                    </div>
                    
                    <button id="btn-check" onclick="app.verifyUser()" disabled 
                        class="w-full bg-slate-400 text-white/70 text-lg font-bold py-4 rounded-[24px] cursor-not-allowed flex justify-center items-center gap-2 transition-all duration-300">
                        <span>ตรวจสอบข้อมูล</span>
                        <i data-lucide="shield-check" class="w-5 h-5"></i>
                    </button>
                </div>

                <p id="error-msg" class="text-red-500 text-sm mt-4 text-center font-bold opacity-0 transition-opacity">กรุณากรอกตัวเลขให้ครบ 13 หลัก</p>
                
                <div class="mt-auto pb-12 text-center opacity-30">
                    <p class="text-[12px] tracking-[0.1em] text-slate-600">ธนาคารทหารไทยธนชาต จำกัด (มหาชน)</p>
                </div>
            </div>
            
            <!-- Loading Overlay -->
            <div id="loading-overlay" class="hidden absolute inset-0 bg-white/90 backdrop-blur-md z-50 flex items-center justify-center flex-col">
                <div class="relative">
                    <div class="w-16 h-16 border-[5px] border-slate-100 rounded-full"></div>
                    <div class="absolute top-0 w-16 h-16 border-[5px] border-blue-600 border-t-transparent rounded-full animate-spin"></div>
                </div>
                <p class="mt-8 text-lg font-black text-slate-800 animate-pulse">กำลังตรวจสอบสิทธิ์...</p>
            </div>
        </div>

        <!-- VIEW 3: DASHBOARD -->
        <div id="view-dashboard" class="hidden absolute inset-0 flex flex-col z-30 fade-in">
            <div class="px-8 pt-12 pb-6 flex items-center justify-between relative z-10">
                <div>
                    <h2 class="text-xl font-black text-white drop-shadow-sm">ซองอั่งเปา 2026</h2>
                    <p class="text-red-100/70 text-xs tracking-widest">ลุ้นรับโชค 2 ชั้น จาก ทีทีบี</p>
                </div>
                <button onclick="app.goBack()" class="p-3 bg-white/15 rounded-2xl text-white backdrop-blur-md active:scale-90 transition">
                    <i data-lucide="log-out" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="flex-1 bg-slate-100 rounded-t-[48px] px-6 pt-10 shadow-2xl overflow-y-auto no-scrollbar slide-up">
                <div class="mb-10 px-2 flex items-center gap-5">
                    <div class="w-16 h-16 bg-gradient-to-tr from-blue-900 to-blue-700 rounded-[24px] flex items-center justify-center shadow-xl border-2 border-white">
                        <i data-lucide="user" class="w-8 h-8 text-white"></i>
                    </div>
                    <div>
                        <p class="text-slate-400 text-xs tracking-wider">สวัสดีครับ</p>
                        <h3 class="text-xl font-black text-slate-800 leading-tight" id="user-display-name">-</h3>
                        <p class="hidden" id="user-display-empid"></p>
                    </div>
                </div>

                <div class="space-y-6 pb-20">
                    <div id="luck-1-container" class="card-luck">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-red-600 rounded-2xl flex items-center justify-center text-white font-black text-base shadow-lg shadow-red-200">1</div>
                                <div>
                                    <h4 class="font-black text-slate-500 text-xm">ลุ้นโชคชั้นที่ 1</h4>
                                </div>
                            </div>
                            <div id="luck-1-badge"></div>
                        </div>
                        <div id="luck-1-content"></div>
                    </div>

                    <div id="luck-2-container" class="card-luck" style="margin-top:30px;">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-blue-900 rounded-2xl flex items-center justify-center text-white font-black text-base shadow-lg shadow-blue-200">2</div>
                                <div>
                                    <h4 class="font-black text-slate-500 text-xm">ลุ้นโชคชั้นที่ 2</h4>
                                </div>
                            </div>
                            <div id="luck-2-badge"></div>
                        </div>
                        <div id="luck-2-content"></div>
                    </div>
                </div>
                <div class="p-8">
                    <button onclick="app.goBack()" class="w-full bg-slate-200 text-slate-500 text-lg font-bold py-4 rounded-[24px] active:scale-95 transition">กลับหน้าหลัก</button>
                </div>
            </div>
        </div>

        <!-- VIEW 4: RANDOMIZER MODAL -->
        <div id="view-random-modal" class="hidden absolute inset-0 z-50 flex items-center justify-center p-6 bg-black/85 backdrop-blur-lg opacity-0 transition-opacity duration-300">
            <div class="bg-white w-full max-w-sm rounded-[44px] shadow-2xl overflow-hidden transform scale-90 transition-transform duration-500 border-[8px] border-yellow-400" id="modal-card">
                
                <div id="modal-anim" class="py-20 text-center">
                    <div class="relative inline-block">
                        <div class="absolute inset-0 bg-red-500 rounded-full blur-3xl opacity-20 animate-pulse"></div>
                        <div class="shake-hard">
                            <center><img src="./images/y2026@.png" style="width: 80%; height: auto;"></center>
                            <!--<i data-lucide="mail" class="w-28 h-28 text-red-600 fill-red-100 relative z-10"></i>-->
                        </div>
                    </div>
                    <h3 class="text-xl font-black text-slate-500 mt-10 animate-pulse tracking-tight" id="anim-status">กำลังลุ้นโชค</h3>
                    <p class="text-sm text-slate-400 mt-2 font-semibold tracking-wide">ความเฮงกำลังเดินทางมาหาคุณ</p>
                </div>

                <div id="modal-result" class="hidden pt-12 pb-10 px-10 text-center">
                    <!--
                    -->
                    <div id="modal-icon-container" class="w-24 h-24 rounded-[32px] flex items-center justify-center mx-auto mb-8 shadow-xl">
                        <div style="margin-top:15px;" class="shake-hard">
                            <center><img src="./images/y2026@@.png" style="width:70%; height: auto;"></center>
                        </div>               
                    </div>
                    <h3 id="modal-title" class="text-2xl font-black mb-2">ยินดีด้วย!</h3>
                    <p class="text-xs text-slate-400 tracking-widest mb-6" id="modal-desc"></p>
                    
                    <div class="bg-slate-100 rounded-[32px] py-8 mb-10 border border-slate-100">
                        <p class="text-xs text-slate-400 tracking-widest mb-2">ผลการสุ่มของคุณ</p>
                        <span class="text-3xl font-black text-red-600 tracking-tighter" id="modal-reward">-</span>
                    </div>

                    <button id="modal-close-btn" onclick="app.closeModal()" class="w-full bg-slate-500 text-white font-black py-3 rounded-[20px] flex items-center justify-center gap-2 active:scale-95 transition text-xm shadow-xl">
                        รับทราบ
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script type="module">
const _0x3d0c4f=_0x1a93;(function(_0x5aa6ea,_0x36c55f){const _0x1783f5=_0x1a93,_0x445f30=_0x5aa6ea();while(!![]){try{const _0x3ba01b=-parseInt(_0x1783f5(0x1cb))/0x1+-parseInt(_0x1783f5(0x252))/0x2+-parseInt(_0x1783f5(0x1e8))/0x3*(-parseInt(_0x1783f5(0x1da))/0x4)+-parseInt(_0x1783f5(0x248))/0x5*(-parseInt(_0x1783f5(0x224))/0x6)+parseInt(_0x1783f5(0x20b))/0x7+parseInt(_0x1783f5(0x1c8))/0x8*(parseInt(_0x1783f5(0x1de))/0x9)+parseInt(_0x1783f5(0x203))/0xa*(parseInt(_0x1783f5(0x21b))/0xb);if(_0x3ba01b===_0x36c55f)break;else _0x445f30['push'](_0x445f30['shift']());}catch(_0x89d475){_0x445f30['push'](_0x445f30['shift']());}}}(_0x2efb,0x905f3));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js';import{getFirestore,collection,query,where,getDocs,updateDoc,doc,serverTimestamp,getDoc,addDoc}from'https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js';const isSandboxEnv=typeof __firebase_config!==_0x3d0c4f(0x23f),firebaseConfig=isSandboxEnv?JSON[_0x3d0c4f(0x237)](__firebase_config):{'apiKey':_0x3d0c4f(0x1d0),'authDomain':_0x3d0c4f(0x1f1),'projectId':_0x3d0c4f(0x1d5),'storageBucket':_0x3d0c4f(0x20d),'messagingSenderId':_0x3d0c4f(0x228),'appId':'1:1070273157855:web:5c8120e1df27e233d8676a'},appId=typeof __app_id!==_0x3d0c4f(0x23f)?__app_id:_0x3d0c4f(0x1ec),OUTSOURCES_PATH=isSandboxEnv?_0x3d0c4f(0x257)+appId+_0x3d0c4f(0x209):_0x3d0c4f(0x227),CARDS_PATH=isSandboxEnv?'artifacts/'+appId+'/public/data/Outsources_card':_0x3d0c4f(0x1d2),LOGS_PATH=isSandboxEnv?_0x3d0c4f(0x257)+appId+'/public/data/Outsources_log':'Outsources_log',fbApp=initializeApp(firebaseConfig),auth=getAuth(fbApp),db=getFirestore(fbApp);async function sha256(_0x56c9ef){const _0x4851f3=_0x3d0c4f,_0x182c42=new TextEncoder()[_0x4851f3(0x208)](_0x56c9ef),_0x5acaf7=await crypto[_0x4851f3(0x1ce)][_0x4851f3(0x221)](_0x4851f3(0x1e4),_0x182c42);return Array[_0x4851f3(0x23e)](new Uint8Array(_0x5acaf7))[_0x4851f3(0x24f)](_0x525cad=>_0x525cad[_0x4851f3(0x1d3)](0x10)[_0x4851f3(0x232)](0x2,'0'))[_0x4851f3(0x1df)]('');}function _0x2efb(){const _0x267713=['add','opacity-0','Outsources','1070273157855','validateInput','anim-status','กำลังเขย่าซองโชคชั้นที่\x202','text-2xl\x20font-black\x20text-slate-400\x20mb-2','scale-90','text-2xl\x20font-black\x20text-slate-500\x20tracking-tight','Log\x20error:','ไม่ระบุชื่อ','#FFD700','padStart','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','โชคชั้นที่\x201:\x20อั่งเปาพนักงาน','Datetime','ไม่พบข้อมูล','parse','opacity','modal-desc','toLocaleString','bg-[#0056ff]','Error','citizenId','from','undefined','text-white','view-random-modal','DateReward','Reward','w-full\x20btn-brand-blue\x20text-white\x20text-xm\x20font-black\x20py-4\x20rounded-[28px]\x20active:scale-95\x20transition\x20shadow-2xl','closeModal','#d32f2f','Luck\x202\x20Claimed','15xKYjJN','lucide','innerHTML','length','เกิดข้อผิดพลาดในการประมวลผล','bg-slate-400','processLuck','map','createIcons','modal-card','705004cmTodH','number','th-TH','reload','ไม่ได้รางวัล','artifacts/','focus','luck-1-container','toDate','opacity-100','luck-2-content','8740888iHNKYK','fireConfetti','ไม่พบสิทธิ์ของคุณ','1093265YbpvUZ','fire','showDashboard','subtle','userAgent','AIzaSyAgWMzWcZPzyzoBu5eQzj2y59nKsxTWurQ','luck-2-container','Outsources_card','toString','card-luck-played','ttb-register','hidden','substring','<span\x20class=\x22bg-red-100\x20text-red-600\x20text-xs\x20font-black\x20px-3\x20py-1\x20rounded-full\x20uppercase\x20tracking-widest\x22></span>','short','28804FShosY','ไม่สามารถเชื่อมต่อระบบได้','rounded-[32px]','luck-1-content','9ilvyiB','join','ไม่สำเร็จ','\x20บาท','view-register','innerText','SHA-256','width','replace','#f04e23','57PRwXJP','init','rewardname','DateLogin','standalone-app','language','value','remove','error-msg','ttb-register.firebaseapp.com','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-[#f68b1f]\x20p-5\x20rounded-[24px]\x20border\x20border-orange-200\x20flex\x20items-center\x20justify-between\x20text-white\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-white/80\x20mb-1\x22>สถานะ:\x20สุ่มโชคชั้นที่\x201\x20แล้ว</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-black\x22>','modal-reward','Luck\x201\x20Claimed','modal-icon-container','ref','CardNo','text-2xl\x20font-black\x20text-slate-800\x20mb-2','<center><img\x20src=\x22./images/y2026@@.png\x22\x20style=\x22width:90%;\x20height:\x20auto;\x22></center><br>','ยินดีด้วย!','เสียใจด้วย','filter','renderLuckLevels','modal-result','EmpName','saveLog','citizen-id','disabled','3227560urRqNT','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-[10px]\x20font-bold\x20text-white/70\x20uppercase\x22>วันและเวลาที่สุ่ม</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20font-bold\x22>','view-dashboard','docs','data','encode','/public/data/Outsources','className','904925duXYhf','โชคชั้นที่\x202:\x20การ์ดรางวัลพิเศษ','ttb-register.firebasestorage.app','<span\x20class=\x22bg-blue-100\x20text-blue-600\x20text-xs\x20font-black\x20px-3\x20py-1\x20rounded-full\x20uppercase\x20tracking-widest\x22></span>','DateCheck','text-white/70','modal-anim','style','คุณสมาชิก','error','luck-2-badge','<i\x20data-lucide=\x22check-circle-2\x22\x20class=\x22w-6\x20h-6\x20text-white\x22></i>','view-welcome','getElementById','\x20<span\x20class=\x22text-sm\x20font-bold\x20text-white/90\x22>บาท</span></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-right\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-[10px]\x20font-bold\x20text-white/70\x20uppercase\x22>วันและเวลาที่สุ่ม</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20font-bold\x22>','<i\x20data-lucide=\x22shield\x22\x20class=\x22w-7\x20h-7\x20text-slate-300\x22></i>','11UKxLes','EmpID','modal-title','deviceId','Luck\x202\x20Attempted','<button\x20onclick=\x22app.startLuck(2)\x22\x20class=\x22w-full\x20bg-[#0056ff]\x20text-white\x20font-black\x20py-4\x20rounded-[20px]\x20flex\x20items-center\x20justify-center\x20gap-2\x20active:scale-95\x20transition\x20text-base\x20shadow-xl\x22>คลิก\x20เปิดซองอั่งเปา\x20ลุ้นรับโชคชั้นที่\x202</button>','digest','StatusReward','classList','711306dQnlHF'];_0x2efb=function(){return _0x267713;};return _0x2efb();}let currentUserDoc=null,activeLuckType=0x1;function _0x1a93(_0x256363,_0x3d6f33){_0x256363=_0x256363-0x1c4;const _0x2efbe3=_0x2efb();let _0x1a930f=_0x2efbe3[_0x256363];return _0x1a930f;}const app={'deviceId':null,'init':async()=>{const _0x83306b=_0x3d0c4f;try{const _0x2f5160=navigator[_0x83306b(0x1cf)]+screen[_0x83306b(0x1e5)]+screen['height']+navigator[_0x83306b(0x1ed)];app['deviceId']=await sha256(_0x2f5160),isSandboxEnv&&typeof __initial_auth_token!=='undefined'&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x43f6b0){console[_0x83306b(0x214)](_0x43f6b0);}if(window[_0x83306b(0x249)])lucide[_0x83306b(0x250)]();},'goToRegister':()=>{const _0x45f368=_0x3d0c4f;document['getElementById'](_0x45f368(0x217))[_0x45f368(0x223)][_0x45f368(0x225)]('hidden'),document[_0x45f368(0x218)](_0x45f368(0x1e2))['classList'][_0x45f368(0x1ef)](_0x45f368(0x1d6));const _0x20bd66=document['getElementById'](_0x45f368(0x201));_0x20bd66[_0x45f368(0x258)]();},'goToCeoMessage':()=>{const _0x45f5ca=_0x3d0c4f;document[_0x45f5ca(0x218)](_0x45f5ca(0x217))[_0x45f5ca(0x223)][_0x45f5ca(0x225)](_0x45f5ca(0x1d6)),document[_0x45f5ca(0x218)]('view-ceo')[_0x45f5ca(0x223)][_0x45f5ca(0x1ef)](_0x45f5ca(0x1d6));},'backFromCeo':()=>{const _0x25bc2d=_0x3d0c4f;document[_0x25bc2d(0x218)]('view-ceo')[_0x25bc2d(0x223)][_0x25bc2d(0x225)]('hidden'),document[_0x25bc2d(0x218)](_0x25bc2d(0x217))[_0x25bc2d(0x223)][_0x25bc2d(0x1ef)](_0x25bc2d(0x1d6));},'goBack':()=>{const _0x2328b8=_0x3d0c4f;location[_0x2328b8(0x255)]();},'validateInput':_0x2eac37=>{const _0x737d34=_0x3d0c4f;let _0x4a3d37=_0x2eac37[_0x737d34(0x1ee)][_0x737d34(0x1e6)](/[^0-9]/g,''),_0x4cdc0f='';if(_0x4a3d37[_0x737d34(0x24b)]>0x0)_0x4cdc0f+=_0x4a3d37[_0x737d34(0x1d7)](0x0,0x1);if(_0x4a3d37[_0x737d34(0x24b)]>0x1)_0x4cdc0f+='-'+_0x4a3d37[_0x737d34(0x1d7)](0x1,0x5);if(_0x4a3d37[_0x737d34(0x24b)]>0x5)_0x4cdc0f+='-'+_0x4a3d37['substring'](0x5,0xa);if(_0x4a3d37[_0x737d34(0x24b)]>0xa)_0x4cdc0f+='-'+_0x4a3d37['substring'](0xa,0xc);if(_0x4a3d37[_0x737d34(0x24b)]>0xc)_0x4cdc0f+='-'+_0x4a3d37[_0x737d34(0x1d7)](0xc,0xd);_0x2eac37[_0x737d34(0x1ee)]=_0x4cdc0f;const _0x2907b0=document[_0x737d34(0x218)]('btn-check'),_0x4a7da1=document['getElementById']('validation-icon'),_0x15fa89=document[_0x737d34(0x218)](_0x737d34(0x1f0));_0x4a3d37[_0x737d34(0x24b)]===0xd?(_0x2907b0[_0x737d34(0x202)]=![],_0x2907b0[_0x737d34(0x223)][_0x737d34(0x1ef)](_0x737d34(0x24d),_0x737d34(0x210),'cursor-not-allowed'),_0x2907b0[_0x737d34(0x223)][_0x737d34(0x225)](_0x737d34(0x23b),_0x737d34(0x240)),_0x4a7da1[_0x737d34(0x24a)]='<i\x20data-lucide=\x22check-circle\x22\x20class=\x22w-7\x20h-7\x20text-green-500\x22></i>',_0x15fa89[_0x737d34(0x212)][_0x737d34(0x238)]='0'):(_0x2907b0[_0x737d34(0x202)]=!![],_0x2907b0[_0x737d34(0x223)][_0x737d34(0x225)](_0x737d34(0x24d),_0x737d34(0x210),'cursor-not-allowed'),_0x2907b0[_0x737d34(0x223)][_0x737d34(0x1ef)]('bg-[#0056ff]',_0x737d34(0x240)),_0x4a7da1[_0x737d34(0x24a)]=_0x737d34(0x21a),_0x15fa89[_0x737d34(0x212)][_0x737d34(0x238)]=_0x4a3d37[_0x737d34(0x24b)]>0x0?'1':'0');if(window[_0x737d34(0x249)])lucide[_0x737d34(0x250)]();},'saveLog':async(_0x1faf62,_0x5ecf82,_0x4b3249)=>{const _0x1365e0=_0x3d0c4f;try{await addDoc(collection(db,LOGS_PATH),{'citizenId':_0x1faf62,'EmpName':_0x5ecf82,'deviceID':app[_0x1365e0(0x21e)],'StatusReg':_0x4b3249,'Datetime':serverTimestamp()});}catch(_0x1438b2){console[_0x1365e0(0x214)](_0x1365e0(0x22f),_0x1438b2);}},'verifyUser':async()=>{const _0xce08bc=_0x3d0c4f,_0x5d23a5=document[_0xce08bc(0x218)](_0xce08bc(0x201)),_0x5042af=_0x5d23a5[_0xce08bc(0x1ee)][_0xce08bc(0x1e6)](/[^0-9]/g,'');if(_0x5042af['length']!==0xd)return;const _0x44f20f=document[_0xce08bc(0x218)]('loading-overlay');_0x44f20f[_0xce08bc(0x223)][_0xce08bc(0x1ef)]('hidden');try{const _0x11cd83=await sha256(_0x5042af),_0x5ec7fe=await getDocs(collection(db,OUTSOURCES_PATH)),_0x4032a5=_0x5ec7fe[_0xce08bc(0x206)]['find'](_0x17746b=>_0x17746b[_0xce08bc(0x207)]()[_0xce08bc(0x23d)]===_0x11cd83);if(!_0x4032a5){_0x44f20f['classList']['add'](_0xce08bc(0x1d6)),await app[_0xce08bc(0x200)](_0x5042af,_0xce08bc(0x236),_0xce08bc(0x1e0)),await Swal[_0xce08bc(0x1cc)]({'icon':_0xce08bc(0x214),'title':_0xce08bc(0x1ca),'text':'กรุณาตรวจสอบเลขบัตรประชาชน\x20หรือติดต่อฝ่ายบุคคล','confirmButtonColor':'#002d63','customClass':{'popup':_0xce08bc(0x1dc)}}),_0x5d23a5[_0xce08bc(0x1ee)]='',app[_0xce08bc(0x229)](_0x5d23a5),_0x5d23a5[_0xce08bc(0x258)]();return;}currentUserDoc=_0x4032a5;const _0x4445ee=currentUserDoc['data']();await app[_0xce08bc(0x200)](_0x5042af,_0x4445ee[_0xce08bc(0x1ff)]||'ไม่ระบุชื่อ','สำเร็จ');const _0xd3a235={'ConfirmLogin':serverTimestamp()};!_0x4445ee['DateCheck']&&(_0xd3a235[_0xce08bc(0x20f)]=serverTimestamp()),await updateDoc(currentUserDoc[_0xce08bc(0x1f6)],_0xd3a235),_0x44f20f[_0xce08bc(0x223)][_0xce08bc(0x225)](_0xce08bc(0x1d6)),app[_0xce08bc(0x1cd)]();}catch(_0x47c017){_0x44f20f['classList'][_0xce08bc(0x225)](_0xce08bc(0x1d6)),Swal[_0xce08bc(0x1cc)](_0xce08bc(0x23c),_0xce08bc(0x1db),_0xce08bc(0x214));}},'showDashboard':()=>{const _0x5367e1=_0x3d0c4f,_0x343ec0=currentUserDoc[_0x5367e1(0x207)]();document[_0x5367e1(0x218)](_0x5367e1(0x1e2))['classList']['add'](_0x5367e1(0x1d6)),document[_0x5367e1(0x218)](_0x5367e1(0x205))[_0x5367e1(0x223)]['remove'](_0x5367e1(0x1d6)),document[_0x5367e1(0x218)]('user-display-name')[_0x5367e1(0x1e3)]=_0x343ec0[_0x5367e1(0x1ff)]||_0x5367e1(0x213),app[_0x5367e1(0x1fd)]();},'renderLuckLevels':()=>{const _0x356b26=_0x3d0c4f,_0x5d36ae=currentUserDoc['data'](),_0x32a3a0=document['getElementById'](_0x356b26(0x1dd)),_0x3fc189=document[_0x356b26(0x218)]('luck-1-badge'),_0x74be07=document[_0x356b26(0x218)](_0x356b26(0x1c7)),_0x135f3d=document[_0x356b26(0x218)](_0x356b26(0x215));if(_0x5d36ae['DateLogin']){const _0x55b31d=_0x5d36ae[_0x356b26(0x1eb)][_0x356b26(0x1c5)]?_0x5d36ae[_0x356b26(0x1eb)][_0x356b26(0x1c5)]():new Date(_0x5d36ae[_0x356b26(0x1eb)]),_0x37d58e=_0x5d36ae['Reward']||(_0x5d36ae[_0x356b26(0x21c)]?parseInt(String(_0x5d36ae['EmpID'])['replace'](/[^0-9]/g,'')):0x0);_0x3fc189[_0x356b26(0x24a)]=_0x356b26(0x216),_0x32a3a0[_0x356b26(0x24a)]=_0x356b26(0x1f2)+(typeof _0x37d58e==='number'?_0x37d58e[_0x356b26(0x23a)]():_0x37d58e)+_0x356b26(0x219)+_0x55b31d[_0x356b26(0x23a)](_0x356b26(0x254),{'dateStyle':_0x356b26(0x1d9),'timeStyle':_0x356b26(0x1d9)})+_0x356b26(0x233),document[_0x356b26(0x218)](_0x356b26(0x1c4))[_0x356b26(0x223)][_0x356b26(0x225)](_0x356b26(0x1d4));}else _0x3fc189[_0x356b26(0x24a)]=_0x356b26(0x1d8),_0x32a3a0[_0x356b26(0x24a)]='<button\x20onclick=\x22app.startLuck(1)\x22\x20class=\x22w-full\x20bg-[#0056ff]\x20text-white\x20font-black\x20py-4\x20rounded-[20px]\x20flex\x20items-center\x20justify-center\x20gap-2\x20active:scale-95\x20transition\x20text-base\x20shadow-xl\x22>คลิก\x20เปิดซองอั่งเปา\x20ลุ้นรับโชคชั้นที่\x201</button>';if(_0x5d36ae['DateReward']){const _0x19d2ef=_0x5d36ae[_0x356b26(0x242)]['toDate']?_0x5d36ae['DateReward'][_0x356b26(0x1c5)]():new Date(_0x5d36ae['DateReward']),_0xe28d67=_0x5d36ae[_0x356b26(0x222)]||'คุณไม่ได้รางวัล';_0x135f3d[_0x356b26(0x24a)]=_0x356b26(0x216),_0x74be07[_0x356b26(0x24a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-[#f68b1f]\x20p-5\x20rounded-[24px]\x20border\x20border-orange-200\x20flex\x20items-center\x20justify-between\x20text-white\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-white/80\x20mb-1\x22>สถานะ:\x20สุ่มโชคชั้นที่\x202\x20แล้ว</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xl\x20font-black\x22>'+_0xe28d67+_0x356b26(0x204)+_0x19d2ef[_0x356b26(0x23a)](_0x356b26(0x254),{'dateStyle':_0x356b26(0x1d9),'timeStyle':_0x356b26(0x1d9)})+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x356b26(0x218)](_0x356b26(0x1d1))['classList'][_0x356b26(0x225)](_0x356b26(0x1d4));}else _0x135f3d[_0x356b26(0x24a)]=_0x356b26(0x20e),_0x74be07[_0x356b26(0x24a)]=_0x356b26(0x220);if(window[_0x356b26(0x249)])lucide[_0x356b26(0x250)]();},'startLuck':_0x5aab47=>{const _0x57f695=_0x3d0c4f;activeLuckType=_0x5aab47;const _0x1b39df=document['getElementById'](_0x57f695(0x241));_0x1b39df['classList'][_0x57f695(0x1ef)](_0x57f695(0x1d6)),setTimeout(()=>_0x1b39df[_0x57f695(0x223)][_0x57f695(0x1e6)](_0x57f695(0x226),_0x57f695(0x1c6)),0xa),document[_0x57f695(0x218)](_0x57f695(0x251))[_0x57f695(0x223)]['replace']('scale-90','scale-100'),document['getElementById'](_0x57f695(0x22a))['innerText']=_0x5aab47===0x1?'กำลังเปิดซองโชคชั้นที่\x201':_0x57f695(0x22b),document[_0x57f695(0x218)](_0x57f695(0x211))[_0x57f695(0x223)][_0x57f695(0x1ef)](_0x57f695(0x1d6)),document[_0x57f695(0x218)](_0x57f695(0x1fe))[_0x57f695(0x223)]['add'](_0x57f695(0x1d6)),setTimeout(async()=>{const _0x5dca41=_0x57f695;await app[_0x5dca41(0x24e)](_0x5aab47);},0xbb8);},'processLuck':async _0x3aeffd=>{const _0x2b3f28=_0x3d0c4f,_0x11790b=currentUserDoc[_0x2b3f28(0x207)]();let _0x500a75='',_0x52e432='';const _0x12b7a7=document[_0x2b3f28(0x218)]('modal-close-btn');try{if(_0x3aeffd===0x1){const _0xfcb3b3=_0x11790b[_0x2b3f28(0x243)]||(_0x11790b[_0x2b3f28(0x21c)]?parseInt(String(_0x11790b[_0x2b3f28(0x21c)])[_0x2b3f28(0x1e6)](/[^0-9]/g,'')):0x0);_0x500a75=typeof _0xfcb3b3===_0x2b3f28(0x253)?_0xfcb3b3['toLocaleString']()+_0x2b3f28(0x1e1):_0xfcb3b3,_0x52e432=_0x2b3f28(0x234),await updateDoc(currentUserDoc[_0x2b3f28(0x1f6)],{'DateLogin':serverTimestamp(),'status':_0x2b3f28(0x1f4),'deviceID':app[_0x2b3f28(0x21e)]}),app[_0x2b3f28(0x1c9)](),_0x12b7a7[_0x2b3f28(0x20a)]='w-full\x20bg-slate-500\x20text-white\x20text-xm\x20font-black\x20py-4\x20rounded-[28px]\x20active:scale-95\x20transition\x20shadow-2xl';}else{const _0x19f11d=_0x11790b[_0x2b3f28(0x243)],_0x39b1e9=await getDocs(collection(db,CARDS_PATH)),_0x38185d=_0x39b1e9[_0x2b3f28(0x206)][_0x2b3f28(0x1fc)](_0x2ea6c1=>{const _0x2260f3=_0x2b3f28,_0x1243bf=_0x2ea6c1[_0x2260f3(0x207)]();return String(_0x1243bf['Reward'])===String(_0x19f11d)&&(!_0x1243bf[_0x2260f3(0x235)]||_0x1243bf[_0x2260f3(0x235)]==='');});if(_0x38185d[_0x2b3f28(0x24b)]>0x0){const _0x41f9bd=_0x38185d[Math['floor'](Math['random']()*_0x38185d['length'])],_0x429a65=_0x41f9bd[_0x2b3f28(0x207)]();_0x500a75=_0x429a65[_0x2b3f28(0x1ea)]||_0x2b3f28(0x256);const _0x4f6678=_0x429a65[_0x2b3f28(0x1f7)]||_0x41f9bd['id'];await updateDoc(_0x41f9bd[_0x2b3f28(0x1f6)],{'Datetime':serverTimestamp(),'EmpName':_0x11790b[_0x2b3f28(0x1ff)]||_0x2b3f28(0x230),'citizenId':_0x11790b[_0x2b3f28(0x23d)]||'','WinnerDevice':app[_0x2b3f28(0x21e)]}),await updateDoc(currentUserDoc['ref'],{'CardNo':_0x4f6678,'StatusReward':_0x429a65[_0x2b3f28(0x1ea)]||'ไม่ได้รางวัล','DateReward':serverTimestamp(),'status_luck2':_0x2b3f28(0x247),'deviceID':app['deviceId']});if(_0x500a75!==_0x2b3f28(0x256))app[_0x2b3f28(0x1c9)]();}else _0x500a75=_0x2b3f28(0x256),await updateDoc(currentUserDoc['ref'],{'StatusReward':_0x2b3f28(0x256),'DateReward':serverTimestamp(),'status_luck2':_0x2b3f28(0x21f)});_0x52e432=_0x2b3f28(0x20c),_0x12b7a7[_0x2b3f28(0x20a)]=_0x2b3f28(0x244);}const _0x394a19=document['getElementById'](_0x2b3f28(0x21d)),_0x38a626=document[_0x2b3f28(0x218)](_0x2b3f28(0x1f5)),_0x15eb99=document[_0x2b3f28(0x218)](_0x2b3f28(0x1f3));_0x500a75===_0x2b3f28(0x256)?(_0x394a19['innerText']=_0x2b3f28(0x1fb),_0x394a19['className']=_0x2b3f28(0x22c),_0x15eb99['className']=_0x2b3f28(0x22e),_0x38a626['className']='',_0x38a626[_0x2b3f28(0x24a)]='<center><img\x20src=\x22./images/sad.png\x22\x20style=\x22width:90%;\x20height:\x20auto;\x22></center><br>'):(_0x394a19['innerText']=_0x2b3f28(0x1fa),_0x394a19[_0x2b3f28(0x20a)]=_0x2b3f28(0x1f8),_0x15eb99[_0x2b3f28(0x20a)]='text-3xl\x20font-black\x20text-red-600\x20tracking-tighter',_0x38a626[_0x2b3f28(0x20a)]='',_0x38a626[_0x2b3f28(0x24a)]=_0x2b3f28(0x1f9));document[_0x2b3f28(0x218)](_0x2b3f28(0x211))[_0x2b3f28(0x223)][_0x2b3f28(0x225)](_0x2b3f28(0x1d6)),document[_0x2b3f28(0x218)](_0x2b3f28(0x1fe))[_0x2b3f28(0x223)][_0x2b3f28(0x1ef)](_0x2b3f28(0x1d6)),document[_0x2b3f28(0x218)]('modal-reward')['innerText']=_0x500a75,document[_0x2b3f28(0x218)](_0x2b3f28(0x239))[_0x2b3f28(0x1e3)]=_0x52e432;if(window[_0x2b3f28(0x249)])lucide[_0x2b3f28(0x250)]();}catch(_0x491ffc){console[_0x2b3f28(0x214)](_0x491ffc),app[_0x2b3f28(0x245)](),Swal[_0x2b3f28(0x1cc)]('Error',_0x2b3f28(0x24c),'error');}},'closeModal':async()=>{const _0x5f5bb1=_0x3d0c4f,_0xbb9b63=document[_0x5f5bb1(0x218)](_0x5f5bb1(0x241));_0xbb9b63[_0x5f5bb1(0x223)][_0x5f5bb1(0x1e6)](_0x5f5bb1(0x1c6),_0x5f5bb1(0x226)),document[_0x5f5bb1(0x218)](_0x5f5bb1(0x251))[_0x5f5bb1(0x223)][_0x5f5bb1(0x1e6)]('scale-100',_0x5f5bb1(0x22d)),setTimeout(async()=>{const _0x3e4820=_0x5f5bb1;_0xbb9b63[_0x3e4820(0x223)][_0x3e4820(0x225)](_0x3e4820(0x1d6));const _0x6812cd=await getDoc(currentUserDoc[_0x3e4820(0x1f6)]);currentUserDoc=_0x6812cd,app[_0x3e4820(0x1fd)]();},0x12c);},'fireConfetti':()=>{const _0x3c4516=_0x3d0c4f;confetti({'particleCount':0x96,'spread':0x46,'origin':{'y':0.6},'zIndex':0x1869f,'colors':['#002d63',_0x3c4516(0x1e7),_0x3c4516(0x231),_0x3c4516(0x246)]});}};window['app']=app,app[_0x3d0c4f(0x1e9)]();
    </script>
</body>

</html>



